import{C as v,m as y,q as m,r,o as V,a as x,b as d,e as s,w as i,s as C,u as S,i as M,v as R,x as q,p as z,k as D,y as E,z as I,_ as B}from"./index-36b9dbfd.js";function F(t){let o="767ec6342382e4f6e61eb6b309a77ee7",u="12aa3ab7fb72372ae063bf8dd24cc3d7",l=v.MD5(t.account).toString(),n=v.MD5(t.password).toString();return l==o&&n==u?Promise.resolve().then(()=>({code:200,data:{token:"12aa3ab7fb72372ae063bf8dd24cc3d7",time:new Date}})):Promise.resolve().then(()=>({code:403,data:{token:"",time:new Date}}))}const K=t=>(z("data-v-d5e6804d"),t=t(),D(),t),N={class:"login-container"},P={class:"login-card"},U={class:"login-title"},J={class:"nest-logo"},L=K(()=>d("div",null,"自动化设备缺陷知识库",-1)),T={class:"login-content"},j=y({__name:"index",setup(t){const o=m({account:"",password:""}),u={account:[{required:!0,message:"请输入帐号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},l=m(),n=m(!1),b=R(),w=q(),_=()=>{l.value&&l.value.validate(async f=>{var a;if(f){n.value=!0;const e=await F(o.value);if(n.value=!1,(e==null?void 0:e.code)===200){const c=e.data;E("token",c.token,30),b.replace(((a=w.query)==null?void 0:a.redirect)||"/")}else I({message:(e==null?void 0:e.msg)||"网络异常，请稍后重试",type:"error"})}})};return(f,a)=>{const e=r("svg-icon"),c=r("el-input"),g=r("el-form-item"),h=r("el-button"),k=r("el-form");return V(),x("div",N,[d("div",P,[d("div",U,[d("div",J,[s(e,{name:"nest-logo"})]),L]),d("div",T,[s(k,{ref_key:"loginFormRef",ref:l,disabled:n.value,model:o.value,rules:u},{default:i(()=>[s(g,{prop:"account"},{default:i(()=>[s(c,{modelValue:o.value.account,"onUpdate:modelValue":a[0]||(a[0]=p=>o.value.account=p),modelModifiers:{trim:!0},size:"large",placeholder:"帐号"},null,8,["modelValue"])]),_:1}),s(g,{prop:"password"},{default:i(()=>[s(c,{type:"password",size:"large",modelValue:o.value.password,"onUpdate:modelValue":a[1]||(a[1]=p=>o.value.password=p),placeholder:"密码",onKeyup:C(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),s(h,{loading:n.value,size:"large",onClick:S(_,["prevent"]),plain:""},{default:i(()=>[M(" 登录 ")]),_:1},8,["loading","onClick"])]),_:1},8,["disabled","model"])])])])}}}),G=B(j,[["__scopeId","data-v-d5e6804d"]]);export{G as default};
